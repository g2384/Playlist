<!doctype html>
<html><head><title>UK Official Chart TOP 40</title><style>
body{max-width: 800px; margin:0 auto;}iframe, object, embed {max-width: 100%;}
.hidden{visibility:hidden;}
</style>
<link href="jquery.nouislider.css" rel="stylesheet">
<body><div class=center><span id=ver></span><br>
<br />
<div id="iplayer"><iframe width="640" height="390" name="frame1" frameborder="0" type="text/html" src=""></iframe></div><br>
<button type="button" onclick="Prev()">Prev</button>
<button type="button" onclick="Loop()">Loop</button>
<button type="button" onclick="Next()">Next</button><br>
<div id="setTime" style="display: none;">
<div id="slider" style="max-width:640px"></div>
<span id="time"></span>
</div>
<span id="duration-l" class="hidden"></span><span id="duration-u" class="hidden"></span><br>
<input type="text" id="new" value="450p7goxZqg#y6Sxv-sUYtM#m-M1AtrxztU#pUjE9H8QlA4#pB-5XG-DbAA#O-zpOMYRi0w#moSFlvxnbgk#tlYcUqEPN58#tA8AfQaUnXM#ESXgJ9-H-2U#VHrLPs3_1Fs#iD2rhdFRehU#PaKr9gWqwl4#ebXbLfLACGM#lp-EO5I60KA#2vjPBrBU-TM#VPRjCeoBqrI#KD5fLb-WgBU#K0G9T5Bnjlc#hiP14ED28CA#2B7NaYuJ8f4#kcZMCMI24gs#FHCYHldJi_g#50GQjUZ4P3M#iS1g8G_njx8#PIh2xe4jnpk#X2BYmmTI04I#bg1sT4ILG0w#oG08ukJPtR8#u3u22OYqFGo#nCkpzqqog4k#JXRN_LkCa_o#BS46C2z5lVE#JuM7hObGjWI#Qtb11P1FWnc#nfWlot6h_JM#SYM-RJwSGQ8#AOPMlIIg_38#L8eRzOYhLuw#4Ba_qTPA4Ds#H8tS5UQmNQM#0KSOMA3QBU0#Mi-bUcDAQ_w#b6vSf0cA9qY#fiore9Z5iUg#SSrCaX8ttuw#AmEIemQfk34#H4ifSrE8iSg#0OWj0CiM8WU#BPiW0tkWfeg#NmugSMBh_iI#Jaha10-onPE#WIm1GgfRz6M#HGy9i8vvCxk#BxRQNO8vg2Y#jqYxyd1iSNk#6ACl8s_tBzE#MKfzMOC19Fc#BwWzSyxNc9I#Kjpa0SMOug0#-2U0Ivkn2Ds#0go2nfVXFgA#hHUbLv4ThOo#HMUDVMiITOU#Qc9c12q3mrc#cFf85n-Im8Q#oAeotgCHL3E#8wRW57nBLMI#YUiVIPgJA0o#9rHiLAdMmss#nXXVMcyy_Ag#7JJfJgyHYwU#Y8ygKnBtKAk#Ix9NXVIbm2A#MYSVMgRr6pw#9KtYYHKEGDc#7PCkvCPvDXk#DCCJCILiX3o#oC-GflRB0y4#0HDdjwpPM3Y#ST6nEvIEY4s#40nFOYGVJtY#WLyHSOXhZhY#fZswz64dFlw#kdemFfbS5H0#iX-QaNzd-0Y#wvzfOyW0ZMo#Ut9oJ8hyjVI#EAyzpLGBI1E#IxxstCcJlsc#p1JPKLa-Ofc#1lQtoRFaLsA#JXRN_LkCa_o#E-bYftKKIQA#uJ_1HMAGb4k#7RMQksXpQSk#rymUSbYQjw8#oKxuiw3iMBE#kv_cwzAIOHs#9FOWI6Zftpg#LDZX4ooRsWs#KWw_5PYu58I#tZy5E6ILvEA#imi9Smkt_cI#9ycBvqm9LFQ#VRuoR--LdqQ#wmoR82v6G5o#MDUoSpDKwXk#DKRRg150OYU#AC0rqLvYTIg#6Cp6mKbRTQY#qklYTlTSeJc#r5yaoMjaAmE#Okn0WpJqgHE#NmqlYjFlmgk#xwGERoFtQoM#HwctEiWLe84#6BV37Dcxj9s#8B93tgRxMuE#DAMM8JVbr8g#TFXlWfzW9Uo#Fa6bW4cTB2o#9WpDyhSNKI0#wrNTOo4KH8c#HoMzLLWNV1g#LBr7kECsjcQ#SCnBZwm4wqQ#KnnvfHz7qzA#CTE8zselPCo#XqLTe8h0-jo#iH0WwlQd5-I#zrX5zrPoZoM#DlpZ8z1bNfk#wT3RhIJZu4k#an4ySOlsUMY#h-nnAeByB1A#JJr80jXCepc#WgSqSex1HDg##NAME?#v9uDwppN5-w#COwkCW38J54#f7ld-3nZUxA#yYrvJ0hYr8I#CFF0mV24WCY#WSrktmE963I#UpsKGvPjAgw#QoyMvE5g7f8#jhSBocg1RsM#7qlvYjMx1kY#KnL2RJZTdA4#_kqQDCxRCzM#OzxMjBEazas#egRlSfS8XxY#irJeuKar8Ns#qpgTC9MDx1o#v6Gxin8VKZc#SFswqe0lhkI#Nsx-JVymaGk#ABhDiXbUaBE#s97Mb1TZqbU#hkrF8uC92O4#ZwOVOSi-5nc#MPipMQvKgKk#hT_nvWreIhg#rKUbBcEz3XQ#usaHkd31cuM#p2tjsNabkzo#5jUGAVUwhRU#QapfTGTXbxc#DRiWtWzuC38#OHZRHEJHS2k#oD2XV_Ri800#0FfG_5JBVBQ#i0XOCs86om0#KivkLfyEcmM#6BMqNWTlNPQ#Ljg6g7BAdQo#fL6FaI-wJxs#ubhkguhrYGg#rSMY2CVjCZA#ENrj5u_lrWw#MMAppa1cAVo#IyVPyKrx0Xo#v0Gu_Yh_keE#oMAFme1hBH0#gBoXld4URfk#7mcGJA7-HeM#dBjJ89A6p7Q#csYUGJLtZnw#TWwIztjs29Y#SaolVEJEjV4#U-93LzZM1y0#3x2ABSAMVno#fijFu49xaIc#SYM-RJwSGQ8#bltr_Dsk5EY#_xQKWnvtg6c#Xk2JrVkCojw#O_pbBkXQg20#bPaWyHuYNCE#Tdh6mBohXF8#9vMh9f41pqE#N_hmzLU1_cc#1zMMfrtTa64#jB1jbU-peqc#Bzr5VtFvSyw#ahdmNS9Nkm0#LOLE1YE_oFQ#3PU4d5Iogd4" />
<button type="button" onclick="LoadNew()">Load</button><br>
input value="Youtube_Link#Youtube_Link" <span style="color:#888">//capital letters, splitted by #</span>
</div></body>
<script src="jquery.min.js"></script>
<script src="jquery.nouislider.js"></script>
<link href="jquery.nouislider.css" rel="stylesheet">

<script src="http://www.youtube.com/player_api"></script>
<script>
var new_ver = "Nov 2, 2014";
var cur = document.getElementById("new").value.split("#");
var Link = $.noUiSlider.Link;
var i = 0,
    l = cur.length,
    loop = 0,
    duration = 100,
    currentTime = 0,
    up = 0,
	low = 0
	;
var slider = $("#slider");
slider.noUiSlider({
	start: [0, duration],
	step: 1,
	range: {
		'min': [ 0 ],
		'max': [ duration ]
	}
	,connect: true
	,serialization: {
		lower: [
			new Link({
				target: $('#duration-l'),
				format: {
					decimals: 0
				}
			})
		],
		upper: [
			new Link({
				target: $('#duration-u'),
				format: {
					decimals: 0
				}
			})
		]
	}
});


var cur = []; // create youtube player
var player;

var l_minutes
function onYouTubePlayerAPIReady() {
console.log(cur[i]);
    document.getElementById("ver").innerHTML = "Last Chart Update: " + new_ver;
    LoadNew();
    player = new YT.Player('iplayer', {
        height: '390',
        width: '640',
        videoId: cur[i],
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    });
	setInterval(function() {
	up=$('#duration-u').text();
	low=$('#duration-l').text();
	$("#time").text(Math.floor(low / 60)+":"+(low % 60)+" - "+
	Math.floor(up / 60)+":"+(up % 60)+" (total: "+Math.floor((up-low) / 60)+":"+((up-low) % 60)+")");
  if(player.getCurrentTime()>$('#duration-u').text()&&loop){
  player.loadVideoById(cur[i], $('#duration-l').text(), $('#duration-u').text());
  }
}, 100);
}


function onPlayerReady(event) {
    event.target.playVideo(); // autoplay video
}

function onPlayerStateChange(event) {

	duration = player.getDuration();
    addSlider(loop);
	
    if (event.data === 0) {
    	if (!loop){
			i++;
          if (i == l) {
            i = 0;
         }
    	}
        player.loadVideoById(cur[i], $('#duration-l').text(), $('#duration-u').text());
    }
}

function Loop() {
    loop=1;
    $('#setTime').css({"display":""});
}

function Next() {
    loop=0;
    $('#setTime').css({"display":"none"});
    i++;
    if (i == l) {
        i = 0;
    }
    player.loadVideoById(cur[i], 0);
}

function Prev() {
    loop=0;
    $('#setTime').css({"display":"none"});
    i--;
    if (i < 0) {
        i = 0;
    }
    player.loadVideoById(cur[i], 0);
}

function LoadNew() {
    var string = document.getElementById("new").value;
    cur = string.split("#");
    l = cur.length;
}

function addSlider(loop){
if(!loop){
slider.noUiSlider({
	start: [0, duration],
	step: 1,
	range: {
		'min': [ 0 ],
		'max': [ duration ]
	}
	,connect: true
	,serialization: {
		lower: [
			new Link({
				target: $('#duration-l'),
				format: {
					decimals: 0
				}
			})
		],
		upper: [
			new Link({
				target: $('#duration-u'),
				format: {
					decimals: 0
				}
			})
		]
	}
}, true);
}
}
</script></html>
